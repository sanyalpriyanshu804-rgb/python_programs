def input_validation():
    while True:
        a=input('Enter the number: ')
        if a.isdigit():
            a = int(a)
            if a < 0:
                print('Prime numbers can\'t be 0 or negative.')
            else:
                return a
        else:
            print('Enter a valid (+ve)integer !')

def ask_retry():
    while True:
        a=input('Do you want to continue using this program? (Y/N): ').strip().lower()
        if a in ['y','yes']:
            return True
        elif a in ['n', 'no']:
            return False
        else:
            print('Choose a valid option (Y for yes and N for no)')
            print()

def is_prime(n):
    factors=set()
    prime=True
    for i in range(2,int(n**0.5)+1):
        if n%i ==0:
            prime=False
            factors.add(i)
            factors.add(int(n/i))
    return prime, list(factors)

print('''
This is a prime number checker.
Try it and have fun!
''')

entry_no=input('Enter the entry number: ')
with open(r"C:\Users\Home\Desktop\monthly_budget.txt",'a') as file:
    file.write(f'\n')
    file.write("*"*20)
    file.write(f"\n{entry_no}")

    while True:
        num=input_validation()
        if num==2:
            print(f'✅{num} is a prime number')
            file.write(f'\n{num} is a prime number')

        elif num==1:
            print(f'❌{num} is not a prime number')
            file.write(f'\n{num} is not a prime number')

        else:
            prime, factors = is_prime(num)
            if prime:
                print(f'✅{num} is a prime number.')
                print()
                file.write(f'\n{num} is a prime number.')
            else:
                print(f'❌{num} is not a prime number.')
                file.write(f'\n{num} is not a prime number.')

                print('Because it has factors:- ',end=' ')
                file.write('\nBecause it has factors:- ')

                for i in sorted(factors):
                    print(i,end=", ")
                    file.write(str(i)+', ')
                print()
                print()
                # file.write('\n')
                # file.write('\n')
        if not ask_retry():
            break
        else:
            print('\nThanks for using this program again!')
            print()
    print('Thanks for using this program!\nHave a nice day :)')
    file.write(f'\n')
    file.write("*"*20)
